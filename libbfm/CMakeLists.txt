cmake_minimum_required(VERSION 3.9)
project(bfm VERSION 0.1.0 DESCRIPTION "Big F'ing Matrix")

# library setup

add_library(bfm SHARED
	src/material.c
	src/matrix.c
	src/mesh.c
	src/obj.c
	src/state.c
)

set_target_properties(bfm PROPERTIES VERSION ${PROJECT_VERSION})
set_target_properties(bfm PROPERTIES SOVERSION 1)

set_target_properties(bfm PROPERTIES PUBLIC_HEADER
	"src/bfm/bfm.h;src/bfm/math.h;src/bfm/material.h;src/bfm/matrix.h;src/bfm/mesh.h;src/bfm/obj.h"
)

# private include directories

target_include_directories(bfm PRIVATE src)

# install rule
# TODO are public headers installed to bfm/bfm.h or bfm.h?
# TODO is this respectful to *BSD systems?

include(GNUInstallDirs)

install(
	TARGETS bfm
	PUBLIC_HEADER DESTINATION ${CMAKE_INSTALL_INCLUDEDIR}/bfm
	LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
	ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR}
)
